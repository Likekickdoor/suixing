<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut Icon" href="html/favicon.ico">
    <link rel="stylesheet" href="html/css/details.css">
    <link rel="stylesheet" type="text/css" href="html/css/Plugins/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="html/css/Plugins/daterangepicker.css">
    <title>详情页</title>
</head>
<body onselectstart="return false">
    <div class="header">
        <div class="headerContent">
            <div class="siteName"><img src="favicon.ico" /><span>随行网</span></div>
            <div class="siteContents">
                <li><a href="">首页</a></li>
                <li><a href="" class="active">查询</a></li>
                <li><a href="">服务</a></li>
                <li><a href="">关于</a></li>
                <li><a href="">联系我们</a></li>
            </div>
        </div>
    </div>
    <div class="theBackBoard">
        <img src="html/img/screen.jpg" />
    </div>
    <div class="searchArea">
        <form action="index.php" method="GET" id="mainForm">
        <div class="InputWhere">
            <div class="start">
                <input type="text" id="start" name="dpplace" placeholder="输入起点" autocomplete="off" spellcheck="false"/>
                <!-- 此处为下拉城市名列表 -->
                <ul class="listCityName">
                    <li>株洲</li>
                    <li>北京</li>
                </ul>
            </div>
            <div class="SEbutton">
                <input type="button" id="SEbutton" /></div>
            <div class="end">
                <input type="text" id="end" name="arrplace" placeholder="输入终点" autocomplete="off" spellcheck="false"/>
                <ul class="listCityName">
                    <li>株洲</li>
                    <li>北京</li>
                </ul>
            </div>
        </div>
        <div class="InputWhen">
            <input type="text" name="dateRange" placeholder="选择日期">
        </div>
        <div class="addScreen"><a>添加筛选</a></div>
        <div class="screenMenu">
            <div class="grayLine">
                <div>是否直达</div>
                <div><input name="SFZD" type="checkbox"/></div>
            </div>
            <div class="grayLine">
                <div>交通工具</div>
                <div>
                    <li><div>火车</div><div><input name="trainCheck" type="checkbox"/></div></li>
                    <li><div>汽车</div><div><input name="busCheck" type="checkbox"/></div></li>
                    <li><div>飞机</div><div><input name="planeCheck" type="checkbox"/></div></li>
                </div>
            </div>
            <div class="btnScreen"><a>关闭</a></div>
        </div>
        <div class="InputSubmit">
            <input type="button" id="submit" value="查&nbsp;询" />
        </div>
    </form>
    </div>
    <div class="resultsArea">
        <div class="TAG-1 active" id="tag"></div>
        <span class="TAG-1Words" id="tag">推荐</span>
        <div class="TAG-2" id="tag"></div>
        <span class="TAG-2Words" id="tag">火车</span>
        <div class="TAG-3" id="tag"></div>
        <span class="TAG-3Words" id="tag">汽车</span>
        <div class="TAG-4" id="tag"></div>
        <span class="TAG-4Words" id="tag">飞机</span>
        <div class="TAG-5" id="tag"></div>
        <span class="TAG-5Words" id="tag">轮船</span>
        <div class="listAll">
            <div class="LAtitle">
                <h1>查询结果</h1>
            </div>
            <ul class="ulSUGGEST" id="ul">
                <div class="sorts">
                    <div class="CityA">选择中转城市1<a></a></div>
                    <div class="CityB">选择中转城市2<a></a></div>
                </div>
                <div class="ACity">
                        <div>中转城市</div><div>中转城市</div><div>中转城市</div>
                        <div>中转城市</div><div>中转城市</div><div>中转城市</div>
                        <div>中转城市</div><div>中转城市</div><div>中转城市</div>
                        <div>中转城市</div><div>中转城市</div><div>中转城市</div>
                        <div>中转城市</div><div>中转城市</div><div>中转城市</div>
                </div>
                <div class="BCity">
                        <div>中转城市</div><div>中转城市</div><div>中转城市</div>
                        <div>中转城市</div><div>中转城市</div><div>中转城市</div>
                        <div>中转城市</div><div>中转城市</div><div>中转城市</div>
                        <div>中转城市</div><div>中转城市</div><div>中转城市</div>
                        <div>中转城市</div><div>中转城市</div><div>中转城市</div>
                </div>
                <li class="lists Normal notZ">
                    <div class="dotss"></div>
                    <div class="moreTags">
                        <div class="moreTagsLeft">
                            <div class="tg1">荐</div>
                            <div class="tg2">直达</div>
                            <div class="tg3">路线最短</div>
                            <span class="tg4">
                                <span class="tt1"><img src="html/img/train.svg" /></span>
                                <span class="tt2"><img src="html/img/bus.svg" /></span>
                                <span class="tt3"><img src="html/img/plane.svg" /></span>
                                <span class="tt4"><img src="html/img/ship.svg" /></span>
                            </span>
                            <span class="showHideWindow"></span>
                            <sapn class="showHideBtn">
                                <span class="transCity"><a></a></span>
                                <span class="showHideStationsName"></span>
                                <span class="showHideKm"></span>
                                <span class="foldBtn"></span>
                            </span>
                        </div>
                        <div class="moreTagsRight">
                            <span class="currencySymbol">￥</span>
                            <span class="prices">122
                            </span>
                        </div>
                        <div class="stations">
                            <div class="StationLeft">
                                <div class="number">K9001</div>
                                <div class="costTime">2时15分
                                </div>
                            </div>
                            <div class="StationCenter">
                                <div class="startStation">
                                    <div class="startTime">00:00</div>
                                    <div class="startPlace">北京</div>
                                </div>
                                <div class="throughStations slideRight">
                                    <div class="line" id="first">
                                        <div class="SaEdots"></div>
                                        <div class="CenterDots"></div>
                                        <div class="btnSlideRight">经停信息</div>
                                        <div class="lineThroughDots"></div>
                                        <div class="STAT">
                                            <div class="saveStationsGap">
                                                 <!-- <div>666</div> -->
                                                 <!-- 停站距离 -->
                                            </div>
                                            <div class="space"></div>
                                            <div class="saveStationsName">
                                                <div>默认站X</div>
                                                <!-- 留一站才停站信息按钮显示 -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="endStation">
                                    <div class="endTime">2:00</div>
                                    <div class="endPlace">天津</div>
                                </div>
                            </div>
                            <div class="StationRight"></div>
                        </div>
                    </div>
                    <div class="fullCover" id="fullCover">
                        <div class="centerBox">
                            <div class="caption">
                                <div class="closeBtn" id="closeWindow"><div class="foldBtn"></div></div>
                                <div class="StarttoEnd">
                                    <div class="wlineInfo">
                                        <div class="wStart">长沙南</div>
                                        <div class="to">至</div>
                                        <div class="wEnd">北京西</div>
                                    </div>
                                    <div class="wCostTime">22时02分</div>
                                    <div class="wStationNum">34</div>
                                </div>
                                <div class="wNumber"></div>
                            </div>
                            <div class="content">
                                <div class="outOFcolumn">
                                    <div class="column">
                                            <div>弯道<span>121</span></div>
                                            <div>鹤山<span>11</span></div>
                                            <div>新高峰<span>11</span></div>
                                            <div>新彦<span>11</span></div>
                                            <div>嫩江<span>11</span></div>
                                            <div>哈达阳<span>11</span></div>
                                            <div>哈力图<span>11</span></div>
                                            <div>红彦<span>11</span></div>
                                            <div>弯道</div><div>鹤山</div>
                                            <div>新高峰</div><div>新彦</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="CitySelect">
                            <div>途径城市01</div>
                            <div>途径城市02</div>
                            <div>途径城市03</div>
                            <div>途径城市01</div>
                            <div>途径城市02</div>
                            <div>途径城市03</div>
                            <div>途径城市01</div>
                            <div>途径城市02</div>
                            <div>途径城市03</div>
                            <div>途径城市01</div>
                            <div>途径城市01</div>
                            <div>途径城市02</div>
                            <div>途径城市03</div>
                            <div>途径城市01</div>
                            <div>途径城市02</div>
                            <div>途径城市03</div>
                            <div>途径城市01</div>
                            <div>途径城市02</div>
                            <div>途径城市03</div>
                            <div>途径城市01</div>
                            <div>途径城市01</div>
                            <div>途径城市02</div>
                    </div>
                </li>
                <li class="lists Normal notZ">
                    <div class="dotss"></div>
                    <div class="moreTags">
                        <div class="moreTagsLeft">
                            <div class="tg1">荐</div>
                            <div class="tg2">直达</div>
                            <div class="tg3">路线最短</div>
                            <span class="tg4">
                                <span class="tt1"><img src="html/img/train.svg" /></span>
                                <span class="tt2"><img src="html/img/bus.svg" /></span>
                                <span class="tt3"><img src="html/img/plane.svg" /></span>
                                <span class="tt4"><img src="html/img/ship.svg" /></span>
                            </span>
                            <span class="showHideWindow"></span>
                            <sapn class="showHideBtn">
                                <span class="transCity"><a></a></span>
                                <span class="showHideStationsName"></span>
                                <span class="showHideKm"></span>
                                <span class="foldBtn"></span>
                            </span>
                        </div>
                        <div class="moreTagsRight">
                            <span class="currencySymbol">￥</span>
                            <span class="prices">122
                            </span>
                        </div>
                        <div class="stations">
                            <div class="StationLeft">
                                <div class="number">K9001</div>
                                <div class="costTime">2时15分
                                </div>
                            </div>
                            <div class="StationCenter">
                                <div class="startStation">
                                    <div class="startTime">00:00</div>
                                    <div class="startPlace">北京</div>
                                </div>
                                <div class="throughStations slideRight">
                                    <div class="line" id="first">
                                        <div class="SaEdots"></div>
                                        <div class="CenterDots"></div>
                                        <div class="btnSlideRight">经停信息</div>
                                        <div class="lineThroughDots"></div>
                                        <div class="STAT">
                                            <div class="saveStationsGap">
                                                 <!-- <div>666</div> -->
                                                 <!-- 停站距离 -->
                                            </div>
                                            <div class="space"></div>
                                            <div class="saveStationsName">
                                                <div>默认站X</div>
                                                <!-- 留一站才停站信息按钮显示 -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="endStation">
                                    <div class="endTime">2:00</div>
                                    <div class="endPlace">天津</div>
                                </div>
                            </div>
                            <div class="StationRight"></div>
                        </div>
                    </div>
                    <div class="fullCover" id="fullCover">
                        <div class="centerBox">
                            <div class="caption">
                                <div class="closeBtn" id="closeWindow"><div class="foldBtn"></div></div>
                                <div class="StarttoEnd">
                                    <div class="wlineInfo">
                                        <div class="wStart">长沙南</div>
                                        <div class="to">至</div>
                                        <div class="wEnd">北京西</div>
                                    </div>
                                    <div class="wCostTime">22时02分</div>
                                    <div class="wStationNum">34</div>
                                </div>
                                <div class="wNumber"></div>
                            </div>
                            <div class="content">
                                <div class="outOFcolumn">
                                    <div class="column">
                                            <div>弯道<span>121</span></div>
                                            <div>鹤山<span>11</span></div>
                                            <div>新高峰<span>11</span></div>
                                            <div>新彦<span>11</span></div>
                                            <div>嫩江<span>11</span></div>
                                            <div>哈达阳<span>11</span></div>
                                            <div>哈力图<span>11</span></div>
                                            <div>红彦<span>11</span></div>
                                            <div>弯道</div><div>鹤山</div>
                                            <div>新高峰</div><div>新彦</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="CitySelect">
                        
                    </div>
                </li>
            </ul>
            <ul class="ulTRAIN" id="ul"><!--XUNHUAN-->
                <div class="sorts">
                    <div class="isThrough">是否直达</div>
                    <div class="isTime">时间<a></a></div>
                    <div class="isPrice">价格<a></a></div>
                </div>
            <?php 
            foreach($data as $key =>$dataOne):
                $id=$key+1;
                $Dots=$dataOne['arrSort']-$dataOne['dpSort']-1;
            ?>
                <li class="lists Normal">
                    <div class="dotss"></div>
                    <div class="moreTags">
                        <div class="moreTagsLeft">
                            <div class="tg1">荐</div>
                            <div class="tg2">直达</div>
                            <div class="tg3">路线最短</div>
                            <span class="tg4">
                                <span class="tt1"><img src="html/img/train.svg" /></span>
                                <span class="tt2"><img src="html/img/bus.svg" /></span>
                                <span class="tt3"><img src="html/img/plane.svg" /></span>
                                <span class="tt4"><img src="html/img/ship.svg" /></span>
                            </span>
                            <span class="showHideWindow"></span>
                            <sapn class="showHideBtn">
                                <span class="showHideStationsName"></span>
                                <span class="showHideKm"></span>
                                <span class="foldBtn"></span>
                            </span>
                        </div>
                        <div class="moreTagsRight">
                            <span class="currencySymbol">￥</span>
                            <span class="prices">
                            <?=isset($dataOne['hardSeat'])?$dataOne['hardSeat']:$dataOne['bSeat'];?>
                            </span>
                        </div>
                        <div class="stations">
                            <div class="StationLeft">
                                <div class="number"><?=$dataOne['trainNo'];?></div>
                                <div class="costTime">
                                    <?php
                                    $runtime=$dataOne['BrunTime']-$dataOne['ArunTime'];
                                    if($runtime/60>0){
                                        $h=floor($runtime/60);
                                        $i=$runtime%60;
                                        echo $h.'时'.$i.'分';
                                    }else{
                                        echo $runtime.'分';
                                    }
                                    ?>
                                </div>
                            </div>
                            <div class="StationCenter">
                                <div class="startStation">
                                    <div class="startTime"><?=date('H:i',strtotime($dataOne['AstartTime']));?></div>
                                    <div class="startPlace"><?=$dataOne['dpSta'];?></div>
                                </div>
                                <div class="throughStations slideRight">
                                    <div class="line" id="first">
                                        <div class="SaEdots"></div>
                                        <div class="CenterDots"></div>
                                        <div class="btnSlideRight" onclick="doRequestUsingPOST(<?=$id.','.$dataOne['about_id'].','.$dataOne['dpSort'].','.$dataOne['arrSort']; ?>)">经停信息</div>
                                        <div class="lineThroughDots"></div>
                                        <div class="STAT"  id=<?php echo '"train_stop'."$id".'"';?> >
                                            <div class="saveStationsGap">
                                                 <!-- <div>666</div> -->
                                                 <!-- 停站距离 -->
                                            </div>
                                            <div class="space"></div>
                                            <div class="saveStationsName">
                                                <?php for($x=0;$x<$Dots;$x++){ ?>
                                                <div>默认站X</div>
                                                <?php } ?>
                                                <!-- 留一站才停站信息按钮显示 -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="endStation">
                                    <div class="endTime"><?=date('H:i',strtotime($dataOne['BstartTime']));?></div>
                                    <div class="endPlace"><?=$dataOne['arrSta'];?></div>
                                </div>
                            </div>
                            <div class="StationRight"></div>
                        </div>
                    </div>
                    <div class="fullCover" id="fullCover">
                        <div class="centerBox">
                            <div class="caption">
                                <div class="closeBtn" id="closeWindow"><div class="foldBtn"></div></div>
                                <div class="StarttoEnd">
                                    <div class="wlineInfo">
                                        <div class="wStart">长沙南</div>
                                        <div class="to">至</div>
                                        <div class="wEnd">北京西</div>
                                    </div>
                                    <div class="wCostTime">22时02分</div>
                                    <div class="wStationNum">34</div>
                                </div>
                                <div class="wNumber"></div>
                            </div>
                            <div class="content">
                                <div class="outOFcolumn">
                                    <div class="column">
                                            <div>弯道<span>121</span></div>
                                            <div>鹤山<span>11</span></div>
                                            <div>新高峰<span>11</span></div>
                                            <div>新彦<span>11</span></div>
                                            <div>嫩江<span>11</span></div>
                                            <div>哈达阳<span>11</span></div>
                                            <div>哈力图<span>11</span></div>
                                            <div>红彦<span>11</span></div>
                                            <div>弯道</div><div>鹤山</div>
                                            <div>新高峰</div><div>新彦</div>
                                            <div>嫩江</div><div>哈达阳</div><div>哈力图</div><div>红彦</div>
                                            <div>弯道</div><div>弯道</div><div>鹤山</div><div>新高峰</div><div>新彦</div><div>嫩江</div><div>哈达阳</div><div>哈力图</div><div>红彦</div>
                                            <div>弯道</div><div>鹤山</div><div>新高峰</div><div>新彦</div><div>嫩江</div><div>哈达阳</div><div>哈力图</div><div>红彦</div>
                                            <div>弯道</div><div>弯道</div><div>鹤山</div><div>新高峰</div><div>新彦</div><div>嫩江</div><div>哈达阳</div><div>哈力图</div><div>红彦</div>
                                            <div>弯道</div><div>鹤山</div><div>新高峰</div><div>新彦</div><div>嫩江</div><div>哈达阳</div><div>哈力图</div><div>红彦</div>
                                            <div>弯道</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            <?php endforeach; ?>
            </ul>
            <ul class="ulBUS" id="ul">
                <div class="sorts">
                    <div class="isThrough">是否直达</div>
                    <div class="isTime">时间<a></a></div>
                    <div class="isPrice">价格<a></a></div>
                </div>
                <li class="lists Normal">
                    <div class="dotss"></div>
                    <div class="moreTags">
                        <div class="moreTagsLeft">
                            <div class="tg1">荐</div>
                            <div class="tg2">直达</div>
                            <div class="tg3">路线最短</div>
                            <span class="tg4">
                                <span class="tt1"><img src="html/img/train.svg" /></span>
                                <span class="tt2"><img src="html/img/bus.svg" /></span>
                                <span class="tt3"><img src="html/img/plane.svg" /></span>
                                <span class="tt4"><img src="html/img/ship.svg" /></span>
                            </span>
                            <sapn class="showHideBtn">
                                <span class="showHideStationsName"></span>
                                <span class="showHideKm"></span>
                                <span class="foldBtn"></span>
                            </span>
                        </div>
                        <div class="moreTagsRight">
                            <span class="currencySymbol">￥</span>
                            <span class="prices">5</span>
                        </div>
                        <div class="stations">
                            <div class="StationLeft">
                                <div class="number">K9001</div>
                                <div class="costTime">22时02分</div>
                            </div>
                            <div class="StationCenter">
                                <div class="startStation">
                                    <div class="startTime">00: 01</div>
                                    <div class="startPlace">北京赵公口客运站北京赵公</div>
                                </div>
                                <div class="throughStations slideRight">
                                    <div class="line" id="first">
                                        <div class="SaEdots"></div>
                                        <div class="CenterDots"></div>
                                        <div class="btnSlideRight">经停信息</div>
                                        <div class="lineThroughDots"></div>
                                        <div class="STAT">
                                            <div class="saveStationsGap">
                                            </div>
                                            <div class="space"></div>
                                            <div class="saveStationsName">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="endStation">
                                    <div class="endTime">22: 03</div>
                                    <div class="endPlace">衡水护池衡水护池衡水护池</div>
                                </div>
                            </div>
                            <div class="StationRight"></div>
                        </div>
                    </div>
                </li>
            </ul>
            <ul class="ulPLANE" id="ul">
                <div class="sorts">
                    <div class="isThrough">是否直达</div>
                    <div class="isTime">时间<a></a></div>
                    <div class="isPrice">价格<a></a></div>
                </div>
            </ul>
            <ul class="ulSHIP" id="ul">
                <div class="sorts">
                    <div class="isThrough">是否直达</div>
                    <div class="isTime">时间<a></a></div>
                    <div class="isPrice">价格<a></a></div>
                </div>
                <?php 
                if($data){
                foreach($data as $key =>$dataOne):
                    
                ?>
                <li class="lists Normal">
                        <div class="dotss"></div>
                        <div class="moreTags">
                            <div class="moreTagsLeft">
                                <div class="tg1">荐</div>
                                <div class="tg2">直达</div>
                                <div class="tg3">路线最短</div>
                                <span class="tg4">
                                    <span class="tt1"><img src="html/img/train.svg" /></span>
                                    <span class="tt2"><img src="html/img/bus.svg" /></span>
                                    <span class="tt3"><img src="html/img/plane.svg" /></span>
                                    <span class="tt4"><img src="html/img/ship.svg" /></span>
                                </span>
                                <sapn class="showHideBtn">
                                    <span class="showHideStationsName"></span>
                                    <span class="showHideKm"></span>
                                    <span class="foldBtn"></span>
                                </span>
                            </div>
                            <div class="moreTagsRight">
                                <span class="currencySymbol">￥</span>
                                <span class="prices"><?php echo $dataOne[5]?></span>
                            </div>
                            <div class="stations">
                                <div class="StationLeft">
                                    <div class="number">
                                        <?php 
                                    if($dataOne[7]){
                                        echo $dataOne[7];
                                    }else{
                                        echo "无船的信息";
                                    }
                                    ;?>
                                    </div>
                                    <div class="costTime">
                                        <?php 
                                        if($dataOne[3]!== " "){
                                        echo $dataOne[3];
                                    }else{
                                        echo "无船的班期信息";
                                    }
                                        ?>
                                    </div>
                                </div>
                                <div class="StationCenter">
                                    <div class="startStation">
                                        <div class="startTime"></div>
                                        <div class="startPlace"><?php echo $dataOne[0];?></div>
                                    </div>
                                    <div class="throughStations slideRight">
                                        <div class="line" id="first">
                                            <div class="SaEdots"></div>
                                            <div class="CenterDots"></div>
                                            <div class="btnSlideRight">经停信息</div>
                                            <div class="lineThroughDots"></div>
                                            <div class="STAT">
                                                <div class="saveStationsGap">
                                                </div>
                                                <div class="space"></div>
                                                <div class="saveStationsName">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="endStation">
                                        <div class="endTime"></div>
                                        <div class="endPlace"><?=$dataOne[1];?></div>
                                    </div>
                                    <div class="endStationRight">
                                        <div class="RunTime">
                                            <div><?=$dataOne[4];?></div>
                                        </div>
                                        <div class="RunLine">
                                            <div><?=$dataOne[2];?></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="StationRight"></div>
                            </div>
                        </div>
                    </li>
                    <?php endforeach; ?>
                    <?php  }else{
                    echo "无所查线路信息！";
                }?>
            </ul>
        </div>
    </div>
</body>
<script>
    function createXMLRequest()
    {
        var xmlhttp=0;
        if (window.XMLHttpRequest)
        {
        // IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码
          xmlhttp=new XMLHttpRequest();
        }else{
        // IE6, IE5 浏览器执行代码
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        return xmlhttp;
    }
    function doRequestUsingPOST(id,about_id,dpSort,arrSort)
    {
        var url='lib/function/Trains_Stop.php';
        // var url='other/station_json_Api.php';
        var xmlhttp=createXMLRequest();
        var queryString='about_id='+about_id+'&dpSort='+dpSort+'&arrSort='+arrSort;
        id='train_stop'+id;
        xmlhttp.onreadystatechange=function()
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                document.getElementById(id).innerHTML=xmlhttp.responseText;
                return true;
            }
        }
        xmlhttp.open("POST",url,true);
        xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        xmlhttp.send(queryString);
    }
</script>
<script src="html/js/jquery-3.3.1.js"></script>
<script src="html/js/Plugins/moment.js"></script>
<script src="html/js/Plugins/daterangepicker.js"></script>
<script>
    $(document).ready(function () {
        //判断浏览器，并提示用户换成 Chrome 或 Firefox 浏览器查看本页面主要是 IE 等一些浏览器版本不兼容
        if(navigator.userAgent.indexOf('Firefox') == -1 && navigator.userAgent.indexOf('Chrome') == -1){
            alert('温馨提示：' + '\n使用谷歌或火狐浏览器将会最大程度来使用本网站功能');
        }else if(navigator.userAgent.indexOf('Edge') != -1){
            alert('温馨提示：' + '\n使用谷歌或火狐浏览器将会最大程度来使用本网站功能');
        };

        $('input[name="dateRange"]').daterangepicker({
            format: 'YYYY-MM-DD',
            singleDatePicker: true,
            minDate: new Date(),

        });
    //城市名称输入预览
    //  判断字节数（2字节/汉字 1字节/字母）
    ////////////////////////新增////////////////////////
    //  判断字节数（2字节/汉字 1字节/字母），至少输入2个字母或1个汉字才能显示城市名候选下拉列表【.listCityName】
    // $('#start, #end').on('input', function (){
    //     var inputContent = $(this).val();
    //     var inputCityNameLength = $(this).val().length;
    //         if(inputContent.match(/^[\u4E00-\u9FA5]{1,}$/)){
    //             if(inputCityNameLength > 0){
    //                 $(this).parent().children('.listCityName').fadeIn(100, function(){
    //                     $(this).stop().animate({margin: '-30px auto'}, 100);
    //                 });
    //             }else{
    //                 $(this).parent().children('.listCityName').fadeOut(100, function(){
    //                     $(this).stop().animate({margin: '-10px auto'}, 100);
    //                 });
    //             };
    //         }else{
    //             if(inputCityNameLength > 1){
    //                 $(this).parent().children('.listCityName').fadeIn(100, function(){
    //                     $(this).stop().animate({margin: '-30px auto'}, 100);
    //                 });
    //             }else{
    //                 $(this).parent().children('.listCityName').fadeOut(100, function(){
    //                     $(this).stop().animate({margin: '-10px auto'}, 100);
    //                 });
    //             };
    //         }
    // });
    $('#start').on('input', function (){
        var inputContent = $(this).val();
        var inputCityNameLength = $(this).val().length;
            if(inputContent.match(/^[\u4E00-\u9FA5]{1,}$/)){
                if(inputCityNameLength > 0){
                    $(this).parent().children('.listCityName').fadeIn(100, function(){
                        $(this).stop().animate({margin: '-30px auto'}, 100);
                    });
                        crAjax = $.ajax({
                            url: 'indexMessage/getCity.php',
                            beforeSend: function(){},
                            dataType: 'json',
                            data: {'city':inputContent},
                            
                            type: 'POST',
                            success:function(data){
                            $('.start').each(function(){
                                $('.start').children('.listCityName').html("");
                                var dataLength = data.length;
                                for(var i=0; i<dataLength; i++){
                                    $('<li />').appendTo($(this).children('.listCityName')).end();
                                    var datalLess = data[i][1].replace(/[a-zA-Z,（）\s]+/,"");
                                        $(this).children('.listCityName').children('li').eq(i).html(datalLess);
                                        $('.listCityName').children('li').each(function(){
                                            $(this).click(function(){
                                                var tempCityName = $(this).html();
                                                $(this).parent().parent().children('input').val(tempCityName);
                                            });
                                        }); 
                                }
                            });
                        }
                        
                        });
                }else{
                    $(this).parent().children('.listCityName').fadeOut(100, function(){
                        $(this).stop().animate({margin: '-10px auto'}, 100);
                    });
                };
            }else{
                if(inputCityNameLength > 1){
                    $(this).parent().children('.listCityName').fadeIn(100, function(){
                        $(this).stop().animate({margin: '-30px auto'}, 100);
                    });
                        crAjax = $.ajax({
                            
                            url: 'indexMessage/getCity.php',
                            beforeSend: function(){},
                            dataType: 'json',
                            data: {'city':inputContent},
                            
                            type: 'POST',
                            success:function(data){
                                if(crAjax){
                                $('.start').each(function(){
                                    $('.start').children('.listCityName').html("");
                                    var dataLength = data.length;
                                    for(var i=0; i<dataLength; i++){
                                        $('<li />').appendTo($(this).children('.listCityName')).end();
                                        var datalLess = data[i][1].replace(/[a-zA-Z,（）\s]+/,"");
                                        $(this).children('.listCityName').children('li').eq(i).html(datalLess);
                                    }
                                });
                            }
                        }
                        
                        });
                }else{
                    $(this).parent().children('.listCityName').fadeOut(100, function(){
                        $(this).stop().animate({margin: '-10px auto'}, 100);
                    });
                };
            };
    });
    $('#end').on('input', function (){
        var inputContent = $(this).val();
        var inputCityNameLength = $(this).val().length;
            if(inputContent.match(/^[\u4E00-\u9FA5]{1,}$/)){
                if(inputCityNameLength > 0){
                    $(this).parent().children('.listCityName').fadeIn(100, function(){
                        $(this).stop().animate({margin: '-30px auto'}, 100);
                    });
                        crAjax = $.ajax({
                            url: 'indexMessage/getCity.php',
                            beforeSend: function(){},
                            dataType: 'json',
                            data: {'city':inputContent},
                            
                            type: 'POST',
                            success:function(data){
                            $('.end').each(function(){
                                $('.end').children('.listCityName').html("");
                                var dataLength = data.length;
                                for(var i=0; i<dataLength; i++){
                                    $('<li />').appendTo($(this).children('.listCityName')).end();
                                    var datalLess = data[i][1].replace(/[a-zA-Z,（）]+/,"");
                                        $(this).children('.listCityName').children('li').eq(i).html(datalLess);
                                        $('.listCityName').children('li').each(function(){
                                            $(this).click(function(){
                                                var tempCityName = $(this).html();
                                                $(this).parent().parent().children('input').val(tempCityName);
                                            });
                                        }); 
                                }
                            });
                        }
                        
                        });
                }else{
                    $(this).parent().children('.listCityName').fadeOut(100, function(){
                        $(this).stop().animate({margin: '-10px auto'}, 100);
                    });
                };
            }else{
                if(inputCityNameLength > 1){
                    $(this).parent().children('.listCityName').fadeIn(100, function(){
                        $(this).stop().animate({margin: '-30px auto'}, 100);
                    });
                        crAjax = $.ajax({
                            
                            url: 'indexMessage/getCity.php',
                            beforeSend: function(){},
                            dataType: 'json',
                            data: {'city':inputContent},
                            
                            type: 'POST',
                            success:function(data){
                                if(crAjax){
                                $('.end').each(function(){
                                    $('.end').children('.listCityName').html("");
                                    var dataLength = data.length;
                                    for(var i=0; i<dataLength; i++){
                                        $('<li />').appendTo($(this).children('.listCityName')).end();
                                        var datalLess = data[i][1].replace(/[a-zA-Z,（）]+/,"");
                                        $(this).children('.listCityName').children('li').eq(i).html(datalLess);
                                    }
                                });
                            }
                        }
                        
                        });
                }else{
                    $(this).parent().children('.listCityName').fadeOut(100, function(){
                        $(this).stop().animate({margin: '-10px auto'}, 100);
                    });
                };
            };
    });
    });
    $('#start, #end').on('blur', function(){
        $(this).parent().children('.listCityName').fadeOut('fast', function(){
            $(this).stop().animate({margin: '-10px auto'}, 100);
        });
    });
    $('#start, #end').on('focus', function(){
        $(this).parent().children('.listCityName').fadeIn('fast', function(){
            $(this).stop().animate({margin: '-30px auto'}, 100);
        });
    });
    ///点击输入候选列表城市名功能
    $('.listCityName').children('li').each(function(){
        $(this).click(function(){
            var tempCityName = $(this).html();
            $(this).parent().parent().children('input').val(tempCityName);
        });
    });
    ////////////////////////新增////////////////////////
    //若输入起始点至输入的终点之间无站点，则不显示【经停信息】按钮，否则显示
    //此处为 each() 的用法（单独地来操作所有有相同类的元素）
    $('.line').each(function(){
        var lineChildrenLength = $(this).find('.saveStationsName').children('div').length;
        // alert($(this).attr('id') + lineChildrenLength);
        if(lineChildrenLength == 0){
            $(this).children('.btnSlideRight').css({"display": "none"});
        }else{
            $(this).children('.btnSlideRight').css({"display": "block"});
        };
    });
    //激活在火车标签 .ulTRAIN 下的 li 下的的火车图标标签 .tt1，以及相应激活对应的图标标签
    $('.ulSUGGEST').find('.lists.Normal').addClass('J');
    $('.ulTRAIN').find('.lists.Normal').addClass('H');
    $('.ulBUS').find('.lists.Normal').addClass('Q');
    $('.ulPLANE').find('.lists.Normal').addClass('F').addClass('Z');
    $('.ulSHIP').find('.lists.Normal').addClass('C');

    $('ul').children('li:last-child').addClass('last');//【line #216】
    $('#SEbutton').click(function () {
        var str1 = $('#start').val();
        var str2 = $('#end').val();
        $('#start').val(str2);
        $('#end').val(str1);
    });
    ////修改
    $('.addScreen a').click(function(){
        $('.screenMenu').fadeToggle('fast');
    });
    $('.btnScreen').click(function(){
        $('.screenMenu').fadeOut('fast');
    });
    $('.resultsArea').children('#tag').click(function(){
        $(this).parents().find('div').removeClass('active');
        $(this).addClass("active");
    });
    $('.TAG-1').click(function(){
        $(this).parents().find('.listAll').find('ul').css({"display": "none"});
        $('.ulSUGGEST').slideDown('slow');
    });
    $('.TAG-2').click(function(){
        $(this).parents().find('.listAll').find('ul').css({"display": "none"});
        $('.ulTRAIN').css({"display": "table"});
    });
    $('.TAG-3').click(function(){
        $(this).parents().find('.listAll').find('ul').css({"display": "none"});
        $('.ulBUS').css({"display": "table"});
    });
    $('.TAG-4').click(function(){
        $(this).parents().find('.listAll').find('ul').css({"display": "none"});
        $('.ulPLANE').css({"display": "table"});
    });
    $('.TAG-5').click(function(){
        $(this).parents().find('.listAll').find('ul').css({"display": "none"});
        $('.ulSHIP').css({"display": "table"});
    });
    $('.sorts').children('div').bind('click', function(){
        $(this).children('a').toggleClass('selected');
    });//此为排序按钮chevron指示
    $('.showHideStationsName').click(function(){
        $(this).parent().parent().parent().parent().children('.dotss').toggleClass('bottomSlide');
        $(this).parent().parent().parent().parent().toggleClass('toHigh');
        $(this).toggleClass('actived');
        $(this).parent().parent().parent().children('.stations').children('.StationCenter').children('.throughStations').children('.line').children('.STAT').children('.saveStationsName').toggleClass('SHOW');
    });
    $('.showHideKm').click(function(){
        $(this).toggleClass('actived');
        $(this).parent().parent().parent().children('.stations').children('.StationCenter').children('.throughStations').children('.line').children('.STAT').children('.saveStationsGap').toggleClass('SHOW');
    });
    $('.transCity').click(function(){
        $(this).toggleClass('actived');
        $(this).parent().parent().parent().parent().children('.CitySelect').toggleClass('actived');
    });
    $('.transCity').each(function(){
        $(this).parent().parent().parent().parent().children('.CitySelect').children('div').each(function(){
            $(this).click(function(){
                // alert($(this).html());
                // alert($(this).parent().parent().attr('class'));
                $(this).parent().parent().find('.stations').children('.StationCenter').children('.throughStations').children('.line').children('.STAT').children('.saveStationsName').addClass('SHOW');
                var selectedCity = $(this).html();
                $(this).parent().parent().find('.stations').children('.StationCenter').children('.throughStations').children('.line').children('.STAT').children('.saveStationsName').html(selectedCity);
            });
        });
        
        
        // alert($(this).parent().parent().parent().parent().children('.CitySelect').attr('class'));
    });
    //激活标签
    // e.g. $('.lists.Normal').addClass('J').addClass('Q');
    //
    //
    //先占个位~~~~~
    //实现【经停信息】
    //【原理】通过获取 .line 标签下的 div 元素个数-3的值来确定站点数目
    $('.sorts').parent().each(function(){
        var listLength = $(this).children('.lists').length;
            if(listLength == 0){
                $(this).addClass('noInfo');
            }
        var strTransName = $(this).parent().parent().parent().children('.active').next().html();
    });
    
    var browserHeight = $(window).height();
    $('.line').each(function(){
        var length = $(this).find('.saveStationsName').children('div').length;
        var oThisFullCover = $(this).parent().parent().parent().parent().parent().children('.fullCover');
        var NewstrwNumber = $(this).parent().parent().parent().children('.StationLeft').children('.number').html();
        var NewstrwCostTime = $(this).parent().parent().parent().children('.StationLeft').children('.costTime').html();
        var NewstrStartTime = $(this).parent().parent().parent().children('.StationCenter').children('.startStation').children('.startTime').html();
        var NewstrEndTime = $(this).parent().parent().parent().children('.StationCenter').children('.endStation').children('.endTime').html();
        // alert('a');
        var strNoDotsStartTime = NewstrStartTime.substr(0, 2) + NewstrStartTime.substr(-2, 2);
        var strNoDotsEndTime = NewstrEndTime.substr(0, 2) + NewstrEndTime.substr(-2, 2);
        // alert(strNoDotsStartTime);
        // alert(strNoDotsEndTime);
        var CostTimeOF24 = NewstrwCostTime.split('时');
        var minTemp = parseInt(CostTimeOF24[1])/60;
        var CostTimeOFdec = parseFloat(parseInt(CostTimeOF24[0]) + minTemp);
        var numCostTimeOFdecOF24 = Math.ceil(CostTimeOFdec/24);
        if(parseInt(strNoDotsStartTime) >= parseInt(strNoDotsEndTime)){
            $(this).parent().parent().parent().children('.StationCenter').children('.endStation').children('.endTime').addClass('tow');
            if(numCostTimeOFdecOF24 >= 1){
                $(this).parent().parent().parent().children('.StationCenter').children('.endStation').children('.endTime').addClass('tow');
                if(numCostTimeOFdecOF24 >= 2){
                    $(this).parent().parent().parent().children('.StationCenter').children('.endStation').children('.endTime').addClass('three');
                    if(numCostTimeOFdecOF24 >= 3){
                        $(this).parent().parent().parent().children('.StationCenter').children('.endStation').children('.endTime').addClass('four');
                    }
                }
            }
        }else if(parseInt(strNoDotsStartTime) < parseInt(strNoDotsEndTime)){
            if(numCostTimeOFdecOF24 > 1){
                $(this).parent().parent().parent().children('.StationCenter').children('.endStation').children('.endTime').addClass('tow');
                if(numCostTimeOFdecOF24 >= 2){
                    $(this).parent().parent().parent().children('.StationCenter').children('.endStation').children('.endTime').addClass('three');
                    if(numCostTimeOFdecOF24 >= 3){
                        $(this).parent().parent().parent().children('.StationCenter').children('.endStation').children('.endTime').addClass('four');
                    }
                }
            }
        }
        // alert(this)
        // alert(strNoDotsStartTime);
        // alert(strNoDotsEndTime);
        // if()
        if(length > 11){
            $(this).children('.newbtnSlideRight').removeClass('newbtnSlideRight').addClass('btnSlideRight');
            $(this).children('.btnSlideRight').click(function(){
                $(this).parent().parent().parent().parent().parent().children('.moreTagsLeft').children('.showHideWindow').css({"display": "block"});
                $(this).removeClass('btnSlideRight').addClass('newbtnSlideRight').css({"display": "none"});
                $(this).parent().children('.lineThroughDots').css({"display": "none"});
                $(this).parent().parent().parent().parent().parent().children('.moreTagsLeft').children('.showHideBtn').remove();
                $(this).parent().children('.line').remove();
                oThisFullCover.find('.wStationNum').html(length);
                oThisFullCover.find('.wCostTime').html(NewstrwCostTime);
                oThisFullCover.find('.wNumber').html(NewstrwNumber);
                var NewwStartPlace = $(this).parent().parent().parent().parent().children('.StationCenter').children('.startStation').children('.startPlace').html();
                var NewwEndPlace = $(this).parent().parent().parent().parent().children('.StationCenter').children('.endStation').children('.endPlace').html();
                oThisFullCover.children('.centerBox').children('.caption').children('.StarttoEnd').children('.wlineInfo').children('.wStart').html(NewwStartPlace);
                oThisFullCover.children('.centerBox').children('.caption').children('.StarttoEnd').children('.wlineInfo').children('.wEnd').html(NewwEndPlace);
                var timer = setInterval(SetTimer, 8000);
                function SetTimer(){
                    oThisFullCover.children('.centerBox').children('.caption').children('.StarttoEnd').children('.wCostTime').show(1000, function(){
                        $(this).fadeIn(1000);
                        setTimeout(function(){
                            oThisFullCover.children('.centerBox').children('.caption').children('.StarttoEnd').children('.wCostTime').fadeOut(1000, function(){
                                    $(this).hide(1000);
                                });
                        }, 5000);
                    });
                };
                oThisFullCover.fadeIn('fast', function(){
                    oThisFullCover.children('.centerBox').fadeIn(500);
                    $('html').css({"overflow": "hidden"});
                });
                oThisFullCover.children('.centerBox').children('.caption').children('.closeBtn').children('.foldBtn').click(function(){
                        $(this).parent().parent().parent().parent().parent().find('.newbtnSlideRight').css({"display": "block"});
                        oThisFullCover.children('.centerBox').fadeOut('fast', function(){
                        oThisFullCover.css({"display": "none"});
                        $('html').css({"overflow": "auto"});
                        // clearInterval(timer);
                        $('.newbtnSlideRight').css({"display": "none"});
                });
                });
                if(length > 11 && length <= 20){
                    var listsAllHeight = length*35 + 20 ;
                    var oThisFullCoverCenterBoxHeigt = listsAllHeight + 41;
                    var windowMarginTop = (browserHeight - oThisFullCoverCenterBoxHeigt)/2;
                    oThisFullCover.children('.centerBox').children('.content').find('.column').css({"width": "230px", "height": listsAllHeight + "px"});
                    oThisFullCover.children('.centerBox').css({"margin-top": windowMarginTop + "px"});
                }else if(length > 21 && length <= 40){
                    oThisFullCover.children('.centerBox').children('.content').find('.column').css({"width": "460px"});
                }else{
                    oThisFullCover.children('.centerBox').children('.content').find('.column').css({"width": "690px"});
                }
            });
            
        }else{
            for(var j=0; j<length; j++){
            $('<div />').appendTo($(this).children('.lineThroughDots')).addClass('throughDots').end();
            
        };

        }
    });
    $('.throughDots').each(function(){
        $(this).mouseover(function(){
            var indexOfDots = $(this).index();
            $(this).parent().parent().children('.STAT').children('.saveStationsName').find('div').css({"opacity": "1"});
        });
    });
//*******此处排序功能*******
    //按价格升序排序
//要添加：
//判断【起点】、【终点】数据是否存在，存在则执行submit函数

    $('#submit').click(function(){
        var startPlace = $('#start').val();
        var endPlace = $('#end').val();
        if(startPlace.length > 0 && endPlace.length > 0){
            window.location.href = 'index.php?med=trains&dpplace=' + startPlace + '&arrplace=' + endPlace;
        }
    }); 
//解决火车列次过长显示不全的问题
$('.number').each(function(){
    $(this).addClass('addci');
        var numberLength = $(this).html().length * 10;
        if(numberLength > 60){
            $(this).removeClass('addci');
            $(this).css({"width": "100%", "padding": "0", "fontSize": "14px"});
            $(this).parent().children('.costTime').css({"width": "100%", "padding": "0"});
        }
});
////添加
    $('.lists').each(function(){
        $(this).children('.moreTags').children('.stations').children('.StationCenter').children('.throughStations').children('.line').children('.btnSlideRight').click(function(){
            var divsNumber = $(this).parent().children('.STAT').parent().parent()
            $(this).parent().children('.STAT').children('.saveStationsName').children('div').css({"display:": "none"});
            var oThisListsNormal = $(this).parent().parent().parent().parent().parent().parent();
                $('.btnSlideRight, .newbtnSlideRight').each(function(){
                    $(this).click(function(){
                        // alert('<11');
                        $(this).css({"display": "none"});
                        $(this).parent('.line').parent().parent().parent().parent().children('.moreTagsLeft').children('.showHideBtn').css({"display": "flex"});
                        $(this).parent('.line').children('.STAT').css({"display": "block"});
                        $(this).parent().parent('.throughStations').stop().animate({width: '85%'}, 300, function(){
                            var LineWidth = parseFloat($(this).children('.line').css('width')) - 20;
                            var DivNum = $(this).children('.line').find('.saveStationsName').children('div').length + 3;
                            $(this).children('.line').children('.lineThroughDots').css({"display": "flex"});
                            $(this).children('.line').children('.lineThroughDots').children('.throughDots').css({"margin": "0" + " " + LineWidth/(2*DivNum) + "px", "pointer-events": "auto", "display": "inline-block"});
                            var dotsMargin = LineWidth/DivNum + 10;
                            $(this).children('.line').children('.STAT').children('.saveStationsGap').children('div').css({"width": dotsMargin + "px"});
                            $(this).children('.line').children('.STAT').children('.saveStationsName').children('div').css({"width": dotsMargin + "px"});
                            var dotsFLSpace = $(this).children('.line').children('.lineThroughDots').children('div:first-child').offset().left - $(this).children('.line').children('.SaEdots').offset().left + 5;
                            // alert('a');
                            $(this).children('.line').children('.STAT').children('.saveStationsGap').children('div:first-child, div:last-child').css({"width": dotsFLSpace + "px"});
                        });
                        $('.foldBtn').click(function(){
                            $(this).parent('.showHideBtn').fadeOut('fast', function(){
                                $(this).parent().parent().parent().removeClass('toHigh');
                                $(this).parent().parent().parent().children('.dotss').removeClass('bottomSlide');
                                $(this).children('.showHideStationsName').removeClass('actived');
                                $(this).children('.showHideKm').removeClass('actived');
                                $(this).parent().parent().children('.stations').children('.StationCenter').children('.throughStations').children('.line').children('.lineThroughDots').css({"display": "none"});
                                $(this).parent().parent().children('.stations').children('.StationCenter').children('.throughStations').children('.line').children('.btnSlideRight').fadeIn('slow');
                                $(this).parent().parent().children('.stations').children('.StationCenter').children('.throughStations').children('.line').children('.STAT').css({"display": "none"});
                                $(this).parent().parent().children('.stations').children('.StationCenter').children('.throughStations').stop().animate({width: '20%'}, 260);
                            });
                        });
                    }); 
                });
            
        });
    });
    $('.showHideWindow').each(function(){
        $(this).click(function(){
            var oThisFullCover = $(this).parent().parent().parent().children('.fullCover');
            oThisFullCover.css({"display": "block"});
            oThisFullCover.children('.centerBox').css({"display": "block"});
        });
    });
    $('.CityA').click(function(){
        $(this).parent().children('.CityB').children('.selected').removeClass('selected');
        $(this).parent().parent().children('.BCity').slideUp(400);
        $(this).parent().parent().children('.ACity').slideToggle(400);
        $(this).parent().parent().children('.ACity').css({"display": "flex"});
    });
    $('.ACity div').each(function(){
        $(this).click(function(){
            var strCity = $(this).html();
            $(this).parent().parent().children('.sorts').children('.CityA').html('已选择中转城市：' + strCity + '<a></a>');
        });
    });
    $('.CityB').click(function(){
        $(this).parent().children('.CityA').children('.selected').removeClass('selected');
        $(this).parent().parent().children('.ACity').slideUp(400);
        $(this).parent().parent().children('.BCity').slideToggle(400);
        $(this).parent().parent().children('.BCity').css({"display": "flex"});
    });
    $('.BCity div').each(function(){
        $(this).click(function(){
            var strCity = $(this).html();
            $(this).parent().parent().children('.sorts').children('.CityB').stop().animate({width: "180px"}, 400, function(){
                $(this).html('已选择中转城市：' + strCity + '<a></a>');
            });
            
        });
    });
</script>
</html>